<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdministraciÃ³n SnowxChecker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&display=swap');

        body {
            background-color: #1c1c1c;
            color: #e0e0e0;
            font-family: 'Roboto Mono', monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            margin: 0;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            color: #76c7c0;
        }

        header p {
            font-size: 1.2em;
        }

        .container {
            background-color: #2c2c2c;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 0 20px #000;
            width: 90%;
            max-width: 1200px;
            margin-bottom: 30px;
        }

        .form-container, .table-container {
            margin-bottom: 20px;
        }

        .form-container form {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .form-container form input[type="text"],
        .form-container form input[type="submit"] {
            padding: 10px;
            border: 2px solid #76c7c0;
            border-radius: 5px;
            background-color: #3c3c3c;
            color: #e0e0e0;
        }

        .form-container form input[type="submit"] {
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .form-container form input[type="submit"]:hover {
            background-color: #76c7c0;
            color: #1c1c1c;
        }

        .btn-toggle {
            background-color: #3c3c3c;
            color: #76c7c0;
            padding: 10px 20px;
            font-size: 1em;
            border: 2px solid #76c7c0;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin-bottom: 20px;
        }

        .btn-toggle:hover {
            background-color: #76c7c0;
            color: #1c1c1c;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        th, td {
            padding: 10px;
            text-align: center;
            border: 1px solid #3c3c3c;
        }

        th {
            background-color: #444;
        }

        .alert {
            padding: 10px;
            margin-bottom: 20px;
            border: 2px solid #76c7c0;
            border-radius: 5px;
            background-color: #2c2c2c;
        }

        .alert-success {
            border-color: #6c7;
        }

        /* Estilo para los enlaces en fila horizontal */
        .links-container {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .links-container a {
            background-color: #3c3c3c;
            color: #76c7c0;
            padding: 10px 20px;
            font-size: 1em;
            border: 2px solid #76c7c0;
            border-radius: 5px;
            text-decoration: none;
            transition: background-color 0.3s, color 0.3s;
        }

        .links-container a:hover {
            background-color: #76c7c0;
            color: #1c1c1c;
        }

    </style>
</head>
<body>
    <header>
        <h1>AdministraciÃ³n SnowxChecker</h1>
        <p>Bienvenido, {{ nombre_usuario }} ðŸ‘¤</p>
    </header>

    <!-- Contenedor de enlaces en fila horizontal -->
    <div class="links-container">
        <a href="{{ url_for('earnings') }}">Ir a ganancias</a>
        <a href="{{ url_for('create') }}">Ir a crear usuario</a>
        <a href="{{ url_for('keys') }}">Ir a panel keys</a>
    </div>

    <div class="container">
        <!-- Mensajes de recarga y bienvenida -->
        {% if mensaje_recarga %}
        <div class="alert alert-success" id="r_message" role="alert">
            {{ mensaje_recarga|safe }}
        </div>
        <button class="btn-toggle" onclick="copiarAlPortapapeles('r_message')" id="boton_copiar">Copiar Mensaje</button>
        {% endif %}

        {% if mensaje_bienvenida %}
        <div class="alert alert-success" id="w_message" role="alert">
            {{ mensaje_bienvenida|safe }}
        </div>
        <button class="btn-toggle" onclick="copiarAlPortapapeles('w_message')" id="boton_copiar">Copiar Mensaje</button>
        {% endif %}

        <!-- Formulario de bÃºsqueda -->
        <div class="form-container">
            <form method="post" action="{{ url_for('read_users') }}">
                <input type="text" name="search_name" placeholder="Ingrese el nombre">
                <input type="submit" value="Buscar">
            </form>
        </div>

        <!-- Tabla de usuarios -->
        <div class="table-container">
            <button class="btn-toggle" id="toggleButton" onclick="toggleView()">Mostrar VIPs ðŸ’Ž</button>
            <table>
                <!-- Encabezados de la tabla -->
                <tr>
                    <th><a href="{{ url_for('read_users', order_by='id', order_type='asc' if request.args.get('order_type') == 'desc' else 'desc') }}">ID</a></th>
                    <th><a href="{{ url_for('read_users', order_by='name', order_type='asc' if request.args.get('order_type') == 'desc' else 'desc') }}">Nombre</a></th>
                    <th>Usuario</th>
                    <th>ContraseÃ±a</th>
                    <th><a href="{{ url_for('read_users', order_by='credits', order_type='asc' if request.args.get('order_type') == 'desc' else 'desc') }}">CrÃ©ditos</a></th>
                    <th>TelÃ©fono/WhatsApp</th>
                    <th>Editar</th>
                    <th>Eliminar</th>
                </tr>

                <!-- Filas de usuarios -->
                {% for user in users %}
                <tr class="user-row" data-credits="{{ user[4] }}">
                    <td>{{ user[0] }}</td>
                    <td>{{ user[1] }}</td>
                    <td>{{ user[2] }}</td>
                    <td>{{ user[3] }}</td>
                    <td>{{ user[4] }}</td>
                    <td>{{ user[5] }}</td>
                    <td><a href="{{ url_for('edit_user', user_id=user[0]) }}">Editar</a></td>
                    <td><a href="{{ url_for('delete_user', user_id=user[0]) }}">Eliminar</a></td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>

    <script>
        function copiarAlPortapapeles(elementId) {
            var texto = document.getElementById(elementId).innerText;
            var input = document.createElement('textarea');
            input.value = texto;
            document.body.appendChild(input);
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
            alert("Texto copiado al portapapeles: " + texto);
        }

        let showVIP = false;
        function toggleView() {
            showVIP = !showVIP;
            const rows = document.querySelectorAll('.user-row');
            const button = document.getElementById('toggleButton');
            rows.forEach(row => {
                const credits = parseInt(row.getAttribute('data-credits'), 10);
                if (showVIP) {
                    if (credits < 1200) {
                        row.style.display = 'none';
                    }
                    button.innerText = "Mostrar Todos ðŸ‘¥";
                } else {
                    row.style.display = '';
                    button.innerText = "Mostrar VIPs ðŸ’Ž";
                }
            });
        }
    </script>
</body>
</html>
